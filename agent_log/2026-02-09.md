# Agent Log

## 2026-02-09
- Rebuilt project scaffold (content, src, configs).
- Implemented build/check scripts and Fastify server.
- Added sample content and README instructions.
- Added HTML viewer under /viewer/ (Markdown rendered for humans).
- Fixed viewer routing to use /viewer/ and /viewer/* handlers.
- Scoped compression to Markdown responses only to avoid viewer rendering issues.
- Set viewer HTML responses to no-store to avoid cached partial responses.
- Simplified 404 Markdown to only include breadcrumb + summary (no sibling navigation lists).
- Renamed Breadcrumb label to Navigation across build/check.
- Split viewer into separate service (src/viewer.ts) fetching markdown from MARKDOWN_BASE_URL.
- Markdown server now only serves markdown; viewer runs on its own port.
- 404 navigation now includes full requested path with non-link segments beyond deepest existing dir.
- Fixed check expectations for directory sections to match "## Subdirectories" and "## Pages".
- Recombined viewer onto same port as markdown (separate module, shared server).
- Added shared markdown helpers in src/markdown.ts.
- Split path helpers into src/paths.ts and kept templates in src/markdown.ts.
- Viewer now uses getMarkdownForPath to reuse markdown routing/404 logic via shared function (no route injection).
- Viewer now fetches Markdown via HTTP from MARKDOWN_BASE_URL (Markdown API is the sole source of truth).
- Removed src/markdown.ts and src/paths.ts; kept config.ts and added src/utils.ts for shared helpers.
- Server now owns path/404 logic; viewer only fetches Markdown via HTTP and renders.
- Updated directory nav format to bold labels with descriptions and adjusted checks/docs.
- Updated .gitignore to exclude yarn artifacts and logs; untracked .yarn/install-state.gz and .yarnrc.yml.
